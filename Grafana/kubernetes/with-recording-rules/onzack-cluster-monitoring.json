{
    "__inputs": [
      {
        "name": "DS_PROMETHEUS-K8S-PROD",
        "label": "Prometheus-k8s-prod",
        "description": "",
        "type": "datasource",
        "pluginId": "prometheus",
        "pluginName": "Prometheus"
      }
    ],
    "__elements": [],
    "__requires": [
      {
        "type": "panel",
        "id": "gauge",
        "name": "Gauge",
        "version": ""
      },
      {
        "type": "grafana",
        "id": "grafana",
        "name": "Grafana",
        "version": "8.3.6"
      },
      {
        "type": "datasource",
        "id": "prometheus",
        "name": "Prometheus",
        "version": "1.0.0"
      },
      {
        "type": "panel",
        "id": "stat",
        "name": "Stat",
        "version": ""
      },
      {
        "type": "panel",
        "id": "table",
        "name": "Table",
        "version": ""
      },
      {
        "type": "panel",
        "id": "text",
        "name": "Text",
        "version": ""
      },
      {
        "type": "panel",
        "id": "timeseries",
        "name": "Time series",
        "version": ""
      }
    ],
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": "-- Grafana --",
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        }
      ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": null,
    "iteration": 1647608986061,
    "links": [],
    "liveNow": false,
    "panels": [
      {
        "collapsed": false,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 0
        },
        "id": 16,
        "panels": [],
        "title": "Overview",
        "type": "row"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "#EAB839",
                  "value": 1
                },
                {
                  "color": "red",
                  "value": 3
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 6,
          "w": 2,
          "x": 0,
          "y": 1
        },
        "id": 81,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "8.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "sum(kube_node_status_condition{condition!=\"Ready\", status!=\"false\"})\n+\nsum(kube_node_spec_unschedulable)\n+\nsum(kubelet_node_config_error)",
            "hide": false,
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "B"
          }
        ],
        "title": "Failures",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 6,
          "w": 11,
          "x": 2,
          "y": 1
        },
        "id": 28,
        "options": {
          "legend": {
            "calcs": [
              "max",
              "last"
            ],
            "displayMode": "table",
            "placement": "right",
            "sortBy": "Max",
            "sortDesc": true
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "sum(kube_node_status_condition{condition!=\"Ready\", status!=\"false\"}) by (condition)",
            "hide": false,
            "interval": "",
            "legendFormat": "{{condition}}",
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": true,
            "expr": "sum(kube_node_spec_unschedulable)",
            "hide": false,
            "interval": "",
            "legendFormat": "Unschedulable",
            "refId": "B"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": true,
            "expr": "sum(kubelet_node_config_error)",
            "hide": false,
            "interval": "",
            "legendFormat": "KubeletConfigErrors",
            "refId": "C"
          }
        ],
        "timeFrom": "24h",
        "title": "Failures",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 6,
          "w": 11,
          "x": 13,
          "y": 1
        },
        "id": 24,
        "options": {
          "legend": {
            "calcs": [
              "min",
              "max",
              "lastNotNull"
            ],
            "displayMode": "table",
            "placement": "right"
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": true,
            "expr": "sum(kube_node_info)",
            "hide": false,
            "interval": "",
            "legendFormat": "total",
            "refId": "B"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "sum(kube_node_role) by (role)",
            "interval": "",
            "legendFormat": "{{role}}",
            "refId": "A"
          }
        ],
        "timeFrom": "24h",
        "title": "Workload",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "orange",
                  "value": 75
                },
                {
                  "color": "red",
                  "value": 90
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 3,
          "x": 0,
          "y": 7
        },
        "id": 30,
        "options": {
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showThresholdLabels": true,
          "showThresholdMarkers": true
        },
        "pluginVersion": "8.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "100\n/\n(\nsum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"worker\"})\n-\navg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"worker\"}) * $sparenodesfactor\n)\n*\nsum(rate(node_cpu_seconds_total{mode!=\"idle\"}[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"worker\"}))",
            "instant": true,
            "interval": "",
            "legendFormat": "{{pod}}",
            "refId": "A"
          }
        ],
        "title": "Cores Used",
        "type": "gauge"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "orange",
                  "value": 75
                },
                {
                  "color": "red",
                  "value": 90
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 3,
          "x": 3,
          "y": 7
        },
        "id": 33,
        "options": {
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showThresholdLabels": true,
          "showThresholdMarkers": true
        },
        "pluginVersion": "8.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "topk(1,\n  100\n  /\n  sum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"}) by (node)\n  *\n  sum(rate(node_cpu_seconds_total{mode!=\"idle\"}[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)\n)",
            "hide": false,
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Cores Used Top Node",
        "type": "gauge"
      },
      {
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 18,
          "x": 6,
          "y": 7
        },
        "id": 11,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "hidden",
            "placement": "right"
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "sum by (instance) (instance:node_cpu_seconds_total:sum_rate) * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
            "hide": false,
            "interval": "",
            "legendFormat": "{{node}}",
            "refId": "A"
          }
        ],
        "title": "CPU Cores Usage by Node",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "orange",
                  "value": 75
                },
                {
                  "color": "red",
                  "value": 90
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 3,
          "x": 0,
          "y": 12
        },
        "id": 73,
        "options": {
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showThresholdLabels": true,
          "showThresholdMarkers": true
        },
        "pluginVersion": "8.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "100\n/\n(\n  sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n  -\n  avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})\n  * $sparenodesfactor\n)\n*\n(\n  sum(node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))\n  -\n  sum(node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))\n)",
            "instant": true,
            "interval": "",
            "legendFormat": "{{pod}}",
            "refId": "A"
          }
        ],
        "title": "Memory Used",
        "type": "gauge"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "max": 100,
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "orange",
                  "value": 75
                },
                {
                  "color": "red",
                  "value": 90
                }
              ]
            },
            "unit": "percent"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 3,
          "x": 3,
          "y": 12
        },
        "id": 32,
        "options": {
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "showThresholdLabels": true,
          "showThresholdMarkers": true
        },
        "pluginVersion": "8.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "topk(1,\n  100\n  /\n  sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"}) by (node)\n  *\n  (\n  sum(node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)\n  -\n  sum(node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)\n  )\n)",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Memory  Used Top Node",
        "type": "gauge"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "bytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 18,
          "x": 6,
          "y": 12
        },
        "id": 12,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "hidden",
            "placement": "right"
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "instance:node_memory_MemUsed_bytes:sum * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
            "interval": "",
            "legendFormat": "{{node}}",
            "refId": "A"
          }
        ],
        "title": "Memory usage by Node",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "binBps"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 3,
          "x": 0,
          "y": 17
        },
        "id": 75,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "8.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "sum(rate(node_disk_read_bytes_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Disk Read",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "binBps"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 3,
          "x": 3,
          "y": 17
        },
        "id": 74,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "8.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "sum(rate(node_disk_written_bytes_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Disk Write",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 3,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "bytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 18,
          "x": 6,
          "y": 17
        },
        "id": 19,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "hidden",
            "placement": "right"
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "instance:node_disk_read_bytes_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
            "hide": false,
            "interval": "",
            "legendFormat": "{{node}} (read)",
            "refId": "B"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "instance:node_disk_written_bytes_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"} * -1",
            "hide": false,
            "interval": "",
            "legendFormat": "{{node}} (write)",
            "refId": "C"
          }
        ],
        "title": "Disk Read & Write by Node",
        "type": "timeseries"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "binBps"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 3,
          "x": 0,
          "y": 22
        },
        "id": 76,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "8.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "sum(rate(node_network_receive_bytes_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Network Reveive",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "thresholds"
            },
            "mappings": [],
            "min": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                }
              ]
            },
            "unit": "binBps"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 3,
          "x": 3,
          "y": 22
        },
        "id": 77,
        "options": {
          "colorMode": "none",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "calcs": [
              "lastNotNull"
            ],
            "fields": "",
            "values": false
          },
          "textMode": "auto"
        },
        "pluginVersion": "8.3.6",
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "sum(rate(node_network_transmit_bytes_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "title": "Network Transmit",
        "type": "stat"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "${DS_PROMETHEUS-K8S-PROD}"
        },
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisLabel": "",
              "axisPlacement": "auto",
              "axisSoftMax": 200,
              "axisSoftMin": -200,
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 10,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 3,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            },
            "unit": "bytes"
          },
          "overrides": []
        },
        "gridPos": {
          "h": 5,
          "w": 18,
          "x": 6,
          "y": 22
        },
        "id": 14,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "hidden",
            "placement": "right"
          },
          "tooltip": {
            "mode": "multi"
          }
        },
        "targets": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "instance:node_network_receive_bytes_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
            "interval": "",
            "legendFormat": "{{node}} (receive)",
            "refId": "A"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "exemplar": false,
            "expr": "instance:node_network_transmit_bytes_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"} * -1",
            "hide": false,
            "interval": "",
            "legendFormat": "{{node}} (transmit)",
            "refId": "B"
          }
        ],
        "title": "Network Bandwith (receive & transmit) by Node",
        "type": "timeseries"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 27
        },
        "id": 21,
        "panels": [
          {
            "gridPos": {
              "h": 3,
              "w": 14,
              "x": 0,
              "y": 28
            },
            "id": 85,
            "options": {
              "content": "- CPU / Memory allocatable (brutto) = Total allocatable  \n- CPU / Memory allocatable (netto) = Total allocatable - spare nodes ---> All requested, used and limits values are calculated with the allocatable (netto) values",
              "mode": "markdown"
            },
            "pluginVersion": "8.3.6",
            "title": "Comments",
            "type": "text"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 2,
              "x": 14,
              "y": 28
            },
            "id": 87,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Nodes ($noderole)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 2,
              "x": 16,
              "y": 28
            },
            "id": 88,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores (brutto)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 2,
              "x": 18,
              "y": 28
            },
            "id": 89,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n-\navg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left() kube_node_role{role=\"$noderole\"}) * $sparenodesfactor",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores (netto)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 2,
              "x": 20,
              "y": 28
            },
            "id": 90,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory (brutto)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 2,
              "x": 22,
              "y": 28
            },
            "id": 91,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "(sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n-\navg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() kube_node_role{role=\"$noderole\"}) * $sparenodesfactor)",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory (netto)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 100,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 40
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 4,
              "w": 3,
              "x": 0,
              "y": 31
            },
            "id": 93,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(sum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"}) - avg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left() kube_node_role{role=\"$noderole\"}) * $sparenodesfactor)\n*\nsum(kube_pod_container_resource_requests{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Requested (from netto)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 100,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 40
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 4,
              "w": 3,
              "x": 3,
              "y": 31
            },
            "id": 95,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(\nsum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"worker\"})\n-\navg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"worker\"}) * $sparenodesfactor\n)\n*\nsum(rate(node_cpu_seconds_total{mode!=\"idle\"}[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"worker\"}))",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Used (from netto)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 150,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 75
                    },
                    {
                      "color": "red",
                      "value": 125
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 4,
              "w": 3,
              "x": 6,
              "y": 31
            },
            "id": 96,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\nsum(rate(node_cpu_seconds_total{mode!=\"idle\"}[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "B"
              }
            ],
            "title": "Cores Used (from requested)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 500,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 400
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 4,
              "w": 3,
              "x": 9,
              "y": 31
            },
            "id": 97,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(sum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"}) - avg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left() kube_node_role{role=\"$noderole\"}) * $sparenodesfactor)\n*\nsum(kube_pod_container_resource_limits{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "B"
              }
            ],
            "title": "Cores Limits (from netto)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 100,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 40
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 4,
              "w": 3,
              "x": 12,
              "y": 31
            },
            "id": 98,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"}) - avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() kube_node_role{role=\"$noderole\"}) * $sparenodesfactor)\n*\nsum(kube_pod_container_resource_requests{resource=\"memory\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Requested",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 100,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 40
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 4,
              "w": 3,
              "x": 15,
              "y": 31
            },
            "id": 99,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(\n  sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n  -\n  avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})\n  * $sparenodesfactor\n)\n*\n(\n  sum(node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))\n  -\n  sum(node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))\n)",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Used (from netto)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 150,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 75
                    },
                    {
                      "color": "red",
                      "value": 125
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 4,
              "w": 3,
              "x": 18,
              "y": 31
            },
            "id": 100,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests{resource=\"memory\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\n(\n  sum(node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))\n  -\n  sum(node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))\n)",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "B"
              }
            ],
            "title": "Memory Used (from requested)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 250,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 200
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 4,
              "w": 3,
              "x": 21,
              "y": 31
            },
            "id": 94,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"}) - avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() kube_node_role{role=\"$noderole\"}) * $sparenodesfactor)\n*\nsum(kube_pod_container_resource_limits{resource=\"memory\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Limits (from netto)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 0,
              "y": 35
            },
            "id": 110,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests{resource=\"cpu\", namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Requested (apps)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 3,
              "y": 35
            },
            "id": 111,
            "options": {
              "colorMode": "none",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(container_cpu_usage_seconds_total:sum_rate{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Used (apps)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "noValue": "0",
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "purple",
                      "value": 0
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 6,
              "y": 35
            },
            "id": 112,
            "options": {
              "colorMode": "value",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_requests:cpu:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n-\nsum(container_cpu_usage_seconds_total:sum_rate{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"}) > 0",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Wasted (apps)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 9,
              "y": 35
            },
            "id": 113,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_limits{resource=\"cpu\", namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Limits (apps)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 12,
              "y": 35
            },
            "id": 116,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests{resource=\"memory\", namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Requested (apps)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 15,
              "y": 35
            },
            "id": 121,
            "options": {
              "colorMode": "none",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(container_memory_working_set_bytes:sum{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Used (apps)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "noValue": "0",
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "purple",
                      "value": 0
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 18,
              "y": 35
            },
            "id": 123,
            "options": {
              "colorMode": "value",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_requests:memory:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n-\nsum(container_memory_working_set_bytes:sum{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"}) > 0",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Wasted (apps)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 21,
              "y": 35
            },
            "id": 125,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_limits{resource=\"memory\", namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Limits (apps)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 0,
              "y": 38
            },
            "id": 106,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests{resource=\"cpu\", namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Requested (k8s)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 3,
              "y": 38
            },
            "id": 109,
            "options": {
              "colorMode": "none",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(container_cpu_usage_seconds_total:sum_rate{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Used (k8s)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "purple",
                      "value": 0
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 6,
              "y": 38
            },
            "id": 105,
            "options": {
              "colorMode": "value",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_requests:cpu:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n-\nsum(container_cpu_usage_seconds_total:sum_rate{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"}) > 0",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Wasted (k8s)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 9,
              "y": 38
            },
            "id": 108,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_limits{resource=\"cpu\", namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Limits (k8s)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 12,
              "y": 38
            },
            "id": 115,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests{resource=\"memory\", namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Requested (k8s)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 15,
              "y": 38
            },
            "id": 120,
            "options": {
              "colorMode": "none",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(container_memory_working_set_bytes:sum{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Used (k8s)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "purple",
                      "value": 0
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 18,
              "y": 38
            },
            "id": 122,
            "options": {
              "colorMode": "value",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_requests:memory:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n-\nsum(container_memory_working_set_bytes:sum{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"}) > 0",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Wasted (k8s)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 21,
              "y": 38
            },
            "id": 124,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_limits{resource=\"memory\", namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Limits (k8s)",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 0,
              "y": 41
            },
            "id": 101,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Requested",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 3,
              "y": 41
            },
            "id": 102,
            "options": {
              "colorMode": "none",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(instance:node_cpu_seconds_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Used",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 9,
              "y": 41
            },
            "id": 103,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_limits{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Limits",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 12,
              "y": 41
            },
            "id": 114,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests{resource=\"memory\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Requested",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 15,
              "y": 41
            },
            "id": 117,
            "options": {
              "colorMode": "none",
              "graphMode": "area",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(instance:node_memory_MemUsed_bytes:sum * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Used",
            "type": "stat"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 3,
              "w": 3,
              "x": 21,
              "y": 41
            },
            "id": 119,
            "options": {
              "colorMode": "none",
              "graphMode": "none",
              "justifyMode": "auto",
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "textMode": "auto"
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_limits{resource=\"memory\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Limits",
            "type": "stat"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "custom": {
                  "align": "center",
                  "displayMode": "auto",
                  "filterable": false
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "node"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Node"
                    },
                    {
                      "id": "custom.align",
                      "value": "left"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #requests"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Requests"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #used"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Used"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #used-from-requests"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Used (from requests)"
                    },
                    {
                      "id": "unit",
                      "value": "percent"
                    },
                    {
                      "id": "custom.displayMode",
                      "value": "lcd-gauge"
                    },
                    {
                      "id": "thresholds",
                      "value": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "blue"
                          },
                          {
                            "color": "green",
                            "value": 80
                          },
                          {
                            "color": "red",
                            "value": 120
                          }
                        ]
                      }
                    },
                    {
                      "id": "max",
                      "value": 150
                    },
                    {
                      "id": "decimals",
                      "value": 2
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #used-average-absolut"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Average Usage"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #limits"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Limits"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #used-from-limits"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "percent"
                    },
                    {
                      "id": "custom.displayMode",
                      "value": "lcd-gauge"
                    },
                    {
                      "id": "thresholds",
                      "value": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green"
                          },
                          {
                            "color": "yellow",
                            "value": 75
                          },
                          {
                            "color": "red",
                            "value": 90
                          }
                        ]
                      }
                    },
                    {
                      "id": "max",
                      "value": 100
                    },
                    {
                      "id": "decimals",
                      "value": 2
                    },
                    {
                      "id": "displayName",
                      "value": "Used (from limits)"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #allocatable"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Allocatable"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #used-average"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Average Usage"
                    },
                    {
                      "id": "unit",
                      "value": "percent"
                    },
                    {
                      "id": "custom.displayMode",
                      "value": "lcd-gauge"
                    },
                    {
                      "id": "thresholds",
                      "value": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green"
                          },
                          {
                            "color": "yellow",
                            "value": 75
                          },
                          {
                            "color": "red",
                            "value": 90
                          }
                        ]
                      }
                    },
                    {
                      "id": "max",
                      "value": 100
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 44
            },
            "id": 190,
            "options": {
              "footer": {
                "fields": "",
                "reducer": [
                  "sum"
                ],
                "show": false
              },
              "showHeader": true,
              "sortBy": [
                {
                  "desc": true,
                  "displayName": "Used"
                }
              ]
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"}) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "allocatable"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"}) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "requests"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(rate(node_cpu_seconds_total{mode!=\"idle\"}[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "used"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"}) by (node)\n*\nsum(rate(node_cpu_seconds_total{mode!=\"idle\"}[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "used-from-requests"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "avg(rate(node_cpu_seconds_total{mode!=\"idle\"}[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "used-average-absolut"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"}) by (node)\n*\navg(rate(node_cpu_seconds_total{mode!=\"idle\"}[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "used-average"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_limits{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"}) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "limits"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_limits{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"}) by (node)\n*\nsum(rate(node_cpu_seconds_total{mode!=\"idle\"}[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "used-from-limits"
              }
            ],
            "title": "CPU Cores by Node",
            "transformations": [
              {
                "id": "merge",
                "options": {}
              },
              {
                "id": "organize",
                "options": {
                  "excludeByName": {
                    "Time": true
                  },
                  "indexByName": {},
                  "renameByName": {}
                }
              }
            ],
            "type": "table"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "custom": {
                  "align": "center",
                  "displayMode": "auto",
                  "filterable": false
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "node"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Node"
                    },
                    {
                      "id": "custom.align",
                      "value": "left"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #requests"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Requests"
                    },
                    {
                      "id": "unit",
                      "value": "bytes"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #used"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Used"
                    },
                    {
                      "id": "unit",
                      "value": "bytes"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #used-from-requests"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Used (from requests)"
                    },
                    {
                      "id": "unit",
                      "value": "percent"
                    },
                    {
                      "id": "custom.displayMode",
                      "value": "lcd-gauge"
                    },
                    {
                      "id": "thresholds",
                      "value": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "blue"
                          },
                          {
                            "color": "green",
                            "value": 80
                          },
                          {
                            "color": "red",
                            "value": 120
                          }
                        ]
                      }
                    },
                    {
                      "id": "max",
                      "value": 150
                    },
                    {
                      "id": "decimals",
                      "value": 2
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #used-average-absolut"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Average Usage (1d)"
                    },
                    {
                      "id": "unit",
                      "value": "bytes"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #limits"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Limits"
                    },
                    {
                      "id": "unit",
                      "value": "bytes"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #used-from-limits"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "percent"
                    },
                    {
                      "id": "custom.displayMode",
                      "value": "lcd-gauge"
                    },
                    {
                      "id": "thresholds",
                      "value": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green"
                          },
                          {
                            "color": "yellow",
                            "value": 75
                          },
                          {
                            "color": "red",
                            "value": 90
                          }
                        ]
                      }
                    },
                    {
                      "id": "max",
                      "value": 100
                    },
                    {
                      "id": "decimals",
                      "value": 2
                    },
                    {
                      "id": "displayName",
                      "value": "Used (from limits)"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #allocatable"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Allocatable"
                    },
                    {
                      "id": "unit",
                      "value": "bytes"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #used-average"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Average Usage (1d)"
                    },
                    {
                      "id": "unit",
                      "value": "percent"
                    },
                    {
                      "id": "custom.displayMode",
                      "value": "lcd-gauge"
                    },
                    {
                      "id": "thresholds",
                      "value": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green"
                          },
                          {
                            "color": "yellow",
                            "value": 75
                          },
                          {
                            "color": "red",
                            "value": 90
                          }
                        ]
                      }
                    },
                    {
                      "id": "max",
                      "value": 100
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 51
            },
            "id": 191,
            "options": {
              "footer": {
                "fields": "",
                "reducer": [
                  "sum"
                ],
                "show": false
              },
              "showHeader": true,
              "sortBy": [
                {
                  "desc": true,
                  "displayName": "Used"
                }
              ]
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"}) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "allocatable"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests{resource=\"memory\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"}) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "requests"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)\n-\nsum(node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "used"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests{resource=\"memory\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"}) by (node)\n*\n(\n  sum(node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)\n  -\n  sum(node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)\n)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "used-from-requests"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "avg(sum(node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))) by (node)\n-\navg(sum(node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "used-average-absolut"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"}) by (node)\n*\navg(\n  sum(node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"worker\"})) by (node)\n-\n  sum(node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"worker\"})) by (node)\n) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "used-average"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_limits{resource=\"memory\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"}) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "limits"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_limits{resource=\"memory\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"}) by (node)\n*\n(\n  sum(node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)\n  -\n  sum(node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)\n)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "used-from-limits"
              }
            ],
            "title": "Memory by Node",
            "transformations": [
              {
                "id": "merge",
                "options": {}
              },
              {
                "id": "organize",
                "options": {
                  "excludeByName": {
                    "Time": true
                  },
                  "indexByName": {},
                  "renameByName": {}
                }
              }
            ],
            "type": "table"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 24,
              "x": 0,
              "y": 58
            },
            "id": 201,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_requests:cpu:running * on(node) group_left() kube_node_role{role=\"$noderole\"}) by (namespace)\n-\nsum(container_cpu_usage_seconds_total:sum_rate * on(node) group_left() kube_node_role{role=\"$noderole\"}) by (namespace) > 0",
                "hide": false,
                "interval": "",
                "legendFormat": "{{namespace}}",
                "refId": "A"
              }
            ],
            "title": "Namespaces Wasting CPU Cores",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 24,
              "x": 0,
              "y": 66
            },
            "id": 202,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_requests:memory:running * on(node) group_left() kube_node_role{role=\"$noderole\"}) by (namespace)\n-\nsum(container_memory_working_set_bytes:sum * on(node) group_left() kube_node_role{role=\"$noderole\"}) by (namespace) > 0",
                "hide": false,
                "interval": "",
                "legendFormat": "{{namespace}}",
                "refId": "A"
              }
            ],
            "title": "Namespaces Wasting Memory",
            "type": "timeseries"
          }
        ],
        "title": "Capacity Management - Overview",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 28
        },
        "id": 189,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 100,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 40
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 3,
              "x": 0,
              "y": 49
            },
            "id": 155,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(sum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"}) - avg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left() kube_node_role{role=\"$noderole\"}) * $sparenodesfactor)\n*\nsum(kube_pod_container_resource_requests{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Requested (from netto)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 100,
                  "axisSoftMin": -9,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 40
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 10,
              "x": 3,
              "y": 49
            },
            "id": 156,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(sum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node)) - avg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left() topk(1,kube_node_role{role=\"$noderole\"}) by (node)) * $sparenodesfactor)\n*\nsum(kube_pod_container_resource_requests:cpu:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(sum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node)) - avg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left() topk(1,kube_node_role{role=\"$noderole\"}) by (node)) * $sparenodesfactor)\n*\nsum(kube_pod_container_resource_requests:cpu:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(sum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node)) - avg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left() topk(1,kube_node_role{role=\"$noderole\"}) by (node)) * $sparenodesfactor)\n*\nsum(kube_pod_container_resource_requests:cpu:running * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "total",
                "refId": "A"
              }
            ],
            "title": "Cores Requested (from netto)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 11,
              "x": 13,
              "y": 49
            },
            "id": 137,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_requests:cpu:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (requested)",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_requests:cpu:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (requested)",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "(sum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node)) - avg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left() topk(1,kube_node_role{role=\"$noderole\"}) by (node)) * $sparenodesfactor)",
                "interval": "",
                "legendFormat": "allocatable (netto)",
                "refId": "A"
              }
            ],
            "title": "Cores Allocatable & Requested",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 100,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 40
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 3,
              "x": 0,
              "y": 55
            },
            "id": 170,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"}) - avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() kube_node_role{role=\"$noderole\"}) * $sparenodesfactor)\n*\nsum(kube_pod_container_resource_requests{resource=\"memory\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Requested (from netto)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 100,
                  "axisSoftMin": -9,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 40
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 10,
              "x": 3,
              "y": 55
            },
            "id": 171,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\n(sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node)) - avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() topk(1,kube_node_role{role=\"$noderole\"}) by (node)) * $sparenodesfactor)\n*\nsum(container_memory_working_set_bytes:sum{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\n(sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node)) - avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() topk(1,kube_node_role{role=\"$noderole\"}) by (node)) * $sparenodesfactor)\n*\nsum(container_memory_working_set_bytes:sum{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node)) - avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() topk(1,kube_node_role{role=\"$noderole\"}) by (node)) * $sparenodesfactor)\n*\nsum(container_memory_working_set_bytes:sum * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "total",
                "refId": "A"
              }
            ],
            "title": "Memory Requested (from netto)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 11,
              "x": 13,
              "y": 55
            },
            "id": 172,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(container_memory_working_set_bytes:sum{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (requested)",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(container_memory_working_set_bytes:sum{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (requested)",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "(sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node)) - avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() topk(1,kube_node_role{role=\"$noderole\"}) by (node)) * $sparenodesfactor)",
                "hide": false,
                "interval": "",
                "legendFormat": "allocatable (netto)",
                "refId": "A"
              }
            ],
            "title": "Memory Allocatable & Requested",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 100,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 40
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 3,
              "x": 0,
              "y": 61
            },
            "id": 157,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(\nsum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"worker\"})\n-\navg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"worker\"}) * $sparenodesfactor\n)\n*\nsum(rate(node_cpu_seconds_total{mode!=\"idle\"}[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"worker\"}))",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Cores Used (from netto)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 100,
                  "axisSoftMin": -9,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 40
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 10,
              "x": 3,
              "y": 61
            },
            "id": 142,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\n(\nsum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node))\n-\navg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node)) * $sparenodesfactor\n)\n*\nsum(container_cpu_usage_seconds_total:sum_rate{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\n(\nsum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node))\n-\navg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node)) * $sparenodesfactor\n)\n*\nsum(container_cpu_usage_seconds_total:sum_rate{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(\nsum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node))\n-\navg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node)) * $sparenodesfactor\n)\n*\nsum(instance:node_cpu_seconds_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "total",
                "refId": "A"
              }
            ],
            "title": "Cores Used (from netto)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 11,
              "x": 13,
              "y": 61
            },
            "id": 154,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(container_cpu_usage_seconds_total:sum_rate{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (used)",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(container_cpu_usage_seconds_total:sum_rate{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (used)",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(container_cpu_usage_seconds_total:sum_rate * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "total (used)",
                "refId": "D"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "(sum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node)) - avg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left() topk(1,kube_node_role{role=\"$noderole\"}) by (node)) * $sparenodesfactor)",
                "interval": "",
                "legendFormat": "allocatable (netto)",
                "refId": "A"
              }
            ],
            "title": "Cores Allocatable & Used",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 100,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 40
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 3,
              "x": 0,
              "y": 67
            },
            "id": 173,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(\n  sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n  -\n  avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})\n  * $sparenodesfactor\n)\n*\n(\n  sum(node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))\n  -\n  sum(node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))\n)",
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "A"
              }
            ],
            "title": "Memory Used (from netto)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 100,
                  "axisSoftMin": -9,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 40
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 10,
              "x": 3,
              "y": 67
            },
            "id": 174,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(\n  sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node))\n  -\n  avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() topk(1,kube_node_role{role=\"$noderole\"}) by (node))\n  * $sparenodesfactor\n)\n*\nsum(instance:node_memory_MemUsed_bytes:sum * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "total",
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\n(\n  sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node))\n  -\n  avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() topk(1,kube_node_role{role=\"$noderole\"}) by (node))\n  * $sparenodesfactor\n)\n*\nsum(container_memory_working_set_bytes:sum{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\n(\n  sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node))\n  -\n  avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() topk(1,kube_node_role{role=\"$noderole\"}) by (node))\n  * $sparenodesfactor\n)\n*\nsum(container_memory_working_set_bytes:sum{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps",
                "refId": "C"
              }
            ],
            "title": "Memory Used (from netto)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 11,
              "x": 13,
              "y": 67
            },
            "id": 175,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "(sum(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"}) by (node)) - avg(kube_node_status_allocatable{resource=\"memory\"} * on(node) group_left() topk(1,kube_node_role{role=\"$noderole\"}) by (node)) * $sparenodesfactor)",
                "hide": false,
                "interval": "",
                "legendFormat": "allocatable (netto)",
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(container_memory_working_set_bytes:sum{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (used)",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(container_memory_working_set_bytes:sum{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (used)",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(instance:node_memory_MemUsed_bytes:sum * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "total (used)",
                "refId": "D"
              }
            ],
            "title": "Memory Allocatable & Used",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 150,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 75
                    },
                    {
                      "color": "red",
                      "value": 125
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 3,
              "x": 0,
              "y": 73
            },
            "id": 158,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\nsum(rate(node_cpu_seconds_total{mode!=\"idle\"}[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "B"
              }
            ],
            "title": "Cores Used (from requested)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 150,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 75
                    },
                    {
                      "color": "red",
                      "value": 125
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 10,
              "x": 3,
              "y": 73
            },
            "id": 159,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests:cpu:running * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n*\nsum(instance:node_cpu_seconds_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "total",
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests:cpu:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n*\nsum(container_cpu_usage_seconds_total:sum_rate{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests:cpu:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n*\nsum(container_cpu_usage_seconds_total:sum_rate{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps",
                "refId": "C"
              }
            ],
            "title": "Cores Used (from requested)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 11,
              "x": 13,
              "y": 73
            },
            "id": 160,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(container_cpu_usage_seconds_total:sum_rate{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (used)",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(instance:node_cpu_seconds_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "total (used)",
                "refId": "D"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(container_cpu_usage_seconds_total:sum_rate{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (used)",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests:cpu:running * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "requested",
                "refId": "A"
              }
            ],
            "title": "Cores Requested & Used",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 150,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 75
                    },
                    {
                      "color": "red",
                      "value": 125
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 3,
              "x": 0,
              "y": 79
            },
            "id": 176,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests{resource=\"memory\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\n(\n  sum(node_memory_MemTotal_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))\n  -\n  sum(node_memory_MemAvailable_bytes{job=\"node-exporter\"} * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))\n)",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "B"
              }
            ],
            "title": "Memory Used (from requested)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 150,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow"
                    },
                    {
                      "color": "green",
                      "value": 75
                    },
                    {
                      "color": "red",
                      "value": 125
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 10,
              "x": 3,
              "y": 79
            },
            "id": 177,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests:memory:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n*\nsum(container_memory_working_set_bytes:sum{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests:memory:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n*\nsum(container_memory_working_set_bytes:sum{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests:memory:running * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n*\nsum(instance:node_memory_MemUsed_bytes:sum * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "total",
                "refId": "A"
              }
            ],
            "title": "Memory Used (from requested)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 11,
              "x": 13,
              "y": 79
            },
            "id": 178,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(container_memory_working_set_bytes:sum{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (used)",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(container_memory_working_set_bytes:sum{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (used)",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(instance:node_memory_MemUsed_bytes:sum * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "total (used)",
                "refId": "D"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests:memory:running * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "requested",
                "refId": "A"
              }
            ],
            "title": "Memory Requested & Used",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 100,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "purple",
                      "value": 25
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 3,
              "x": 0,
              "y": 85
            },
            "id": 161,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\n(sum(kube_pod_container_resource_requests{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})\n-\nsum(rate(container_cpu_usage_seconds_total{container=\"\", pod!=\"\"}[5m]) * on(node) group_left(role) kube_node_role{role=\"$noderole\"}))",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "B"
              }
            ],
            "title": "Cores Wasted (from requested)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 100,
                  "axisSoftMin": 0,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "purple",
                      "value": 25
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 10,
              "x": 3,
              "y": 85
            },
            "id": 162,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests:cpu:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n*\n(\nsum(kube_pod_container_resource_requests:cpu:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n-\nsum(container_cpu_usage_seconds_total:sum_rate{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n)",
                "hide": false,
                "interval": "",
                "legendFormat": " apps (wasted)",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests:cpu:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n*\n(\nsum(kube_pod_container_resource_requests:cpu:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n-\nsum(container_cpu_usage_seconds_total:sum_rate{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n)",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (wasted)",
                "refId": "A"
              }
            ],
            "title": "Cores Wasted (from requested)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 11,
              "x": 13,
              "y": 85
            },
            "id": 163,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests:cpu:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n-\nsum(container_cpu_usage_seconds_total:sum_rate{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (wasted)",
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests:cpu:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n-\nsum(container_cpu_usage_seconds_total:sum_rate{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (wasted)",
                "refId": "D"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(container_cpu_usage_seconds_total:sum_rate{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (used)",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(container_cpu_usage_seconds_total:sum_rate{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (used)",
                "refId": "E"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests:cpu:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "apps (requested)",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests:cpu:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (requested)",
                "refId": "F"
              }
            ],
            "title": "Cores Requested, Used & Wasted",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 100,
                "min": 0,
                "noValue": "0",
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "purple",
                      "value": 25
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 3,
              "x": 0,
              "y": 91
            },
            "id": 179,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests{resource=\"memory\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\n(\n  sum(kube_pod_container_resource_requests{resource=\"memory\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})\n  -\n  sum(container_memory_working_set_bytes{container=\"\", pod!=\"\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n)",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "B"
              }
            ],
            "title": "Memory Wasted (from requested)",
            "type": "gauge"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 100,
                  "axisSoftMin": 0,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "purple",
                      "value": 25
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 10,
              "x": 3,
              "y": 91
            },
            "id": 180,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests:memory:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n*\n(\n  sum(kube_pod_container_resource_requests:memory:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n  -\n  sum(container_memory_working_set_bytes:sum{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n)",
                "hide": false,
                "interval": "",
                "legendFormat": " apps (wasted)",
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\nsum(kube_pod_container_resource_requests:memory:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n*\n(\n  sum(kube_pod_container_resource_requests:memory:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n  -\n  sum(container_memory_working_set_bytes:sum{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n)",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (wasted)",
                "refId": "B"
              }
            ],
            "title": "Memory Wasted (from requested)",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "noValue": "0",
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 11,
              "x": 13,
              "y": 91
            },
            "id": 181,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests:memory:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n-\nsum(container_memory_working_set_bytes:sum{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (wasted)",
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests:memory:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})\n-\nsum(container_memory_working_set_bytes:sum{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (wasted)",
                "refId": "D"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(container_memory_working_set_bytes:sum{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (used)",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(container_memory_working_set_bytes:sum{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (used)",
                "refId": "E"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_requests:memory:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "apps (requested)",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_requests:memory:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (requested)",
                "refId": "F"
              }
            ],
            "title": "Memory Requested, Used & Wasted",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 500,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 400
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 3,
              "x": 0,
              "y": 97
            },
            "id": 164,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(sum(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left(role) kube_node_role{role=\"$noderole\"}) - avg(kube_node_status_allocatable{resource=\"cpu\"} * on(node) group_left() kube_node_role{role=\"$noderole\"}) * $sparenodesfactor)\n*\nsum(kube_pod_container_resource_limits{resource=\"cpu\"} * on(pod, namespace) group_left() (kube_pod_status_phase{phase=\"Running\"}==1) * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "B"
              }
            ],
            "title": "Cores Limits (from netto)",
            "type": "gauge"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 500,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 401
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 10,
              "x": 3,
              "y": 97
            },
            "id": 165,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(\n  sum(kube_node_status_allocatable:cpu:sum * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n  -\n  sum(kube_node_status_allocatable:cpu:avg * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"})) * $sparenodesfactor\n)\n*\nsum(kube_pod_container_resource_limits:cpu:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(\n  sum(kube_node_status_allocatable:cpu:sum * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n  -\n  sum(kube_node_status_allocatable:cpu:avg * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"})) * $sparenodesfactor\n)\n*\nsum(kube_pod_container_resource_limits:cpu:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s",
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(\n  sum(kube_node_status_allocatable:cpu:sum * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n  -\n  sum(kube_node_status_allocatable:cpu:avg * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"})) * $sparenodesfactor\n)\n*\nsum(kube_pod_container_resource_limits:cpu:running * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "total",
                "refId": "C"
              }
            ],
            "title": "Cores Limits (from netto)",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 11,
              "x": 13,
              "y": 97
            },
            "id": 166,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_limits:cpu:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_limits:cpu:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s",
                "refId": "D"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_limits:cpu:running * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "total",
                "refId": "A"
              }
            ],
            "title": "Cores Limits",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 500,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 400
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 3,
              "x": 0,
              "y": 103
            },
            "id": 182,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(\n  sum(kube_node_status_allocatable:memory:sum * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n  -\n  sum(kube_node_status_allocatable:memory:avg * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"})) * $sparenodesfactor\n)\n*\nsum(kube_pod_container_resource_limits:memory:running * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "B"
              }
            ],
            "title": "Memory Limits (from netto)",
            "type": "gauge"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 500,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 401
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 10,
              "x": 3,
              "y": 103
            },
            "id": 183,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(\n  sum(kube_node_status_allocatable:memory:sum * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n  -\n  sum(kube_node_status_allocatable:memory:avg * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"})) * $sparenodesfactor\n)\n*\nsum(kube_pod_container_resource_limits:memory:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(\n  sum(kube_node_status_allocatable:memory:sum * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n  -\n  sum(kube_node_status_allocatable:memory:avg * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"})) * $sparenodesfactor\n)\n*\nsum(kube_pod_container_resource_limits:memory:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s",
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(\n  sum(kube_node_status_allocatable:memory:sum * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n  -\n  sum(kube_node_status_allocatable:memory:avg * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"})) * $sparenodesfactor\n)\n*\nsum(kube_pod_container_resource_limits:memory:running * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "total",
                "refId": "C"
              }
            ],
            "title": "Memory Limits (from netto)",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 11,
              "x": 13,
              "y": 103
            },
            "id": 184,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_limits:memory:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_limits:memory:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s",
                "refId": "D"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_limits:memory:running * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "total",
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_node_status_allocatable:memory:sum * on(node) group_left(role) kube_node_role{role=\"$noderole\"})\n-\nsum(kube_node_status_allocatable:memory:avg * on(node) group_left(role) topk(1,kube_node_role{role=\"$noderole\"})) * $sparenodesfactor",
                "hide": false,
                "interval": "",
                "legendFormat": "allocatable-netto",
                "refId": "C"
              }
            ],
            "title": "Memory Limits",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 98,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "#EAB839",
                      "value": 75
                    },
                    {
                      "color": "red",
                      "value": 90
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 3,
              "x": 0,
              "y": 109
            },
            "id": 167,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_limits:cpu:running * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\nsum(container_cpu_usage_seconds_total:sum_rate * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "B"
              }
            ],
            "title": "Cores Used (from Limits)",
            "type": "gauge"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 100,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "orange",
                      "value": 75
                    },
                    {
                      "color": "red",
                      "value": 90
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 10,
              "x": 3,
              "y": 109
            },
            "id": 168,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\nsum(kube_pod_container_resource_limits:cpu:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\nsum(container_cpu_usage_seconds_total:sum_rate{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (used)",
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\nsum(kube_pod_container_resource_limits:cpu:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\nsum(container_cpu_usage_seconds_total:sum_rate{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (used)",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "100\n/\nsum(kube_pod_container_resource_limits:cpu:running * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\nsum(container_cpu_usage_seconds_total:sum_rate * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "total (used)",
                "refId": "C"
              }
            ],
            "title": "Cores Limits (from LImits)",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "none"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 11,
              "x": 13,
              "y": 109
            },
            "id": 169,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(container_cpu_usage_seconds_total:sum_rate{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (used)",
                "refId": "D"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_limits:cpu:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (limits)",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(container_cpu_usage_seconds_total:sum_rate{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (used)",
                "refId": "F"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(kube_pod_container_resource_limits:cpu:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (limits)",
                "refId": "E"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": true,
                "expr": "sum(container_cpu_usage_seconds_total:sum_rate * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "total (used)",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_limits:cpu:running * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "total (limits)",
                "refId": "A"
              }
            ],
            "title": "Cores Limits & Used",
            "type": "timeseries"
          },
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [],
                "max": 98,
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "#EAB839",
                      "value": 75
                    },
                    {
                      "color": "red",
                      "value": 90
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 3,
              "x": 0,
              "y": 115
            },
            "id": 185,
            "options": {
              "orientation": "auto",
              "reduceOptions": {
                "calcs": [
                  "lastNotNull"
                ],
                "fields": "",
                "values": false
              },
              "showThresholdLabels": true,
              "showThresholdMarkers": true
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_limits:memory:running * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\nsum(container_memory_working_set_bytes:sum * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "B"
              }
            ],
            "title": "Memory Used (from Limits)",
            "type": "gauge"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 100,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "orange",
                      "value": 75
                    },
                    {
                      "color": "red",
                      "value": 90
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 10,
              "x": 3,
              "y": 115
            },
            "id": 186,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_limits:memory:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\nsum(container_memory_working_set_bytes:sum{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (used)",
                "refId": "A"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_limits:memory:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\nsum(container_memory_working_set_bytes:sum{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (used)",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(kube_pod_container_resource_limits:memory:running * on(node) group_left() kube_node_role{role=\"$noderole\"})\n*\nsum(container_memory_working_set_bytes:sum * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "total (used)",
                "refId": "C"
              }
            ],
            "title": "Memory Used (from Limits)",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 6,
              "w": 11,
              "x": 13,
              "y": 115
            },
            "id": 187,
            "options": {
              "legend": {
                "calcs": [],
                "displayMode": "list",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(container_memory_working_set_bytes:sum{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (used)",
                "refId": "D"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_limits:memory:running{namespace!~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "apps (limits)",
                "refId": "C"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(container_memory_working_set_bytes:sum{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (used)",
                "refId": "F"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_limits:memory:running{namespace=~\"kube-.*|cattle-.*openshift-.*\"} * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "k8s (limits)",
                "refId": "E"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(container_memory_working_set_bytes:sum * on(node) group_left() instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "total (used)",
                "refId": "B"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(kube_pod_container_resource_limits:memory:running * on(node) group_left() kube_node_role{role=\"$noderole\"})",
                "interval": "",
                "legendFormat": "total (limits)",
                "refId": "A"
              }
            ],
            "title": "Memory Limits & Used",
            "type": "timeseries"
          }
        ],
        "title": "Capacity Management - Details",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 29
        },
        "id": 38,
        "panels": [
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 4,
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 30
            },
            "id": 52,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right",
                "sortBy": "Last",
                "sortDesc": false
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum by (instance) (instance:node_cpu_seconds_total:sum_rate) * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "A"
              }
            ],
            "title": "CPU Cores Usage by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 100,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "yellow",
                      "value": 75
                    },
                    {
                      "color": "red",
                      "value": 90
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 37
            },
            "id": 194,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right",
                "sortBy": "Last",
                "sortDesc": false
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\ncount(instance:node_cpu_seconds_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}) by (node)\n*\nsum(instance:node_cpu_seconds_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}) by (node)",
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "A"
              }
            ],
            "title": "CPU Cores Usage by Node",
            "type": "timeseries"
          }
        ],
        "title": "CPU Monitoring",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 30
        },
        "id": 62,
        "panels": [
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 103
            },
            "id": 55,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "instance:node_memory_MemUsed_bytes:sum * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "A"
              }
            ],
            "title": "Memory Usage by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 110
            },
            "id": 195,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nsum(node_memory_MemTotal_bytes * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}) by (node)\n*\nsum(instance:node_memory_MemUsed_bytes:sum * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}) by (node)",
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "A"
              }
            ],
            "title": "Memory Usage by Node",
            "type": "timeseries"
          }
        ],
        "title": "Memory Monitoring",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 31
        },
        "id": 66,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "custom": {
                  "align": "center",
                  "displayMode": "auto",
                  "filterable": false
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "binBps"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #bytes-read"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Read Thoughput"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #bytes-write"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Write Throughput"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #iops-read"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Read IOPS"
                    },
                    {
                      "id": "unit",
                      "value": "iops"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #iops-write"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Write IOPS"
                    },
                    {
                      "id": "unit",
                      "value": "iops"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "node"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Node"
                    },
                    {
                      "id": "custom.align",
                      "value": "left"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #read-wait"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "s"
                    },
                    {
                      "id": "displayName",
                      "value": "Read Wait"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #write-wait"
                  },
                  "properties": [
                    {
                      "id": "unit",
                      "value": "s"
                    },
                    {
                      "id": "displayName",
                      "value": "Write Wait"
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 32
            },
            "id": 69,
            "options": {
              "footer": {
                "fields": "",
                "reducer": [
                  "sum"
                ],
                "show": false
              },
              "showHeader": true,
              "sortBy": [
                {
                  "desc": true,
                  "displayName": "Used"
                }
              ]
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(rate(node_disk_read_bytes_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "bytes-read"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(rate(node_disk_written_bytes_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "bytes-write"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(rate(node_disk_reads_completed_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "iops-read"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(rate(node_disk_writes_completed_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "iops-write"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(rate(node_disk_read_time_seconds_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)\n/\nsum(rate(node_disk_reads_completed_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "read-wait"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(rate(node_disk_write_time_seconds_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)\n/\nsum(rate(node_disk_writes_completed_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "write-wait"
              }
            ],
            "title": "Current Storage Usage by Node",
            "transformations": [
              {
                "id": "merge",
                "options": {}
              },
              {
                "id": "organize",
                "options": {
                  "excludeByName": {
                    "Time": true
                  },
                  "indexByName": {},
                  "renameByName": {}
                }
              }
            ],
            "type": "table"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 24,
              "x": 0,
              "y": 39
            },
            "id": 57,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right",
                "sortBy": "Last",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "max(node_filesystem_size_bytes{mountpoint!~\"/run.*\"}) by(mountpoint,instance) * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}\n-\nmax(node_filesystem_avail_bytes{mountpoint!~\"/run.*\"}) by (mountpoint,instance) * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
                "hide": false,
                "interval": "",
                "legendFormat": "{{node}} ({{mountpoint}})",
                "refId": "B"
              }
            ],
            "title": "Filesystem Usage by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 100,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "yellow",
                      "value": 75
                    },
                    {
                      "color": "red",
                      "value": 90
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 24,
              "x": 0,
              "y": 47
            },
            "id": 198,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right",
                "sortBy": "Last",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\nmax(node_filesystem_size_bytes{mountpoint!~\"/run.*\"}) by(mountpoint,instance) * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}\n*\n(\n  max(node_filesystem_size_bytes{mountpoint!~\"/run.*\"}) by(mountpoint,instance) * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}\n  -\n  max(node_filesystem_avail_bytes{mountpoint!~\"/run.*\"}) by (mountpoint,instance) * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}\n)",
                "hide": false,
                "interval": "",
                "legendFormat": "{{node}} {{mountpoint}}",
                "refId": "B"
              }
            ],
            "title": "Filesystem Usage by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "axisSoftMax": 100,
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "area"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "yellow",
                      "value": 75
                    },
                    {
                      "color": "red",
                      "value": 90
                    }
                  ]
                },
                "unit": "percent"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 55
            },
            "id": 199,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right",
                "sortBy": "Last",
                "sortDesc": false
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "100\n/\n(count(node_cpu_seconds_total{mode=\"idle\"}) by (instance) * on(instance) group_left(node) instance:kube_node_role{role=\"worker\"})\n*\n(sum(rate(node_cpu_seconds_total{mode=\"iowait\"}[5m])) by (instance) * on(instance) group_left(node) instance:kube_node_role{role=\"worker\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "A"
              }
            ],
            "title": "IOWait by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 24,
              "x": 0,
              "y": 62
            },
            "id": 196,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "instance:node_disk_read_bytes_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
                "hide": false,
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "B"
              }
            ],
            "title": "Read Storage Troughput by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "iops"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 24,
              "x": 0,
              "y": 70
            },
            "id": 70,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "instance:node_disk_reads_completed_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
                "hide": false,
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "B"
              }
            ],
            "title": "Read Storage IOPS by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 24,
              "x": 0,
              "y": 78
            },
            "id": 192,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "(instance:node_disk_read_time_seconds_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"})\n/\n(instance:node_disk_reads_completed_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "B"
              }
            ],
            "title": "Read Wait by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 24,
              "x": 0,
              "y": 86
            },
            "id": 56,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "instance:node_disk_written_bytes_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
                "hide": false,
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "C"
              }
            ],
            "title": "Write Storage Troughput by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "iops"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 24,
              "x": 0,
              "y": 94
            },
            "id": 71,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "instance:node_disk_writes_completed_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
                "hide": false,
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "B"
              }
            ],
            "title": "Write Storage IOPS by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 24,
              "x": 0,
              "y": 102
            },
            "id": 193,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "(instance:node_disk_write_time_seconds_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"})\n/\n(instance:node_disk_writes_completed_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"})",
                "hide": false,
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "B"
              }
            ],
            "title": "Write Wait by Node",
            "type": "timeseries"
          }
        ],
        "title": "Storage Monitoring",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 32
        },
        "id": 64,
        "panels": [
          {
            "datasource": {
              "type": "prometheus",
              "uid": "${DS_PROMETHEUS-K8S-PROD}"
            },
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "custom": {
                  "align": "center",
                  "displayMode": "auto",
                  "filterable": false
                },
                "mappings": [],
                "min": 0,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "pps"
              },
              "overrides": [
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #receive-bandwidth"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Receive Bandwidth"
                    },
                    {
                      "id": "unit",
                      "value": "binBps"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #transmit-bandwidht"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Transmit Bandwidth"
                    },
                    {
                      "id": "unit",
                      "value": "binBps"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #receive-packets"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Received Packets"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #transmit-packets"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Transmitted Packets"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #receive-packets-dropped"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Received Packets Dropped"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "Value #transmit-packets-dropped"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Transmitted Packets Dropped"
                    }
                  ]
                },
                {
                  "matcher": {
                    "id": "byName",
                    "options": "node"
                  },
                  "properties": [
                    {
                      "id": "displayName",
                      "value": "Node"
                    },
                    {
                      "id": "custom.align",
                      "value": "left"
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 33
            },
            "id": 58,
            "options": {
              "footer": {
                "fields": "",
                "reducer": [
                  "sum"
                ],
                "show": false
              },
              "showHeader": true,
              "sortBy": [
                {
                  "desc": true,
                  "displayName": "Used"
                }
              ]
            },
            "pluginVersion": "8.3.6",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(rate(node_network_receive_bytes_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "receive-bandwidth"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(rate(node_network_transmit_bytes_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "transmit-bandwidht"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(rate(node_network_receive_packets_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "receive-packets"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(rate(node_network_transmit_packets_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "transmit-packets"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(rate(node_network_receive_drop_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "receive-packets-dropped"
              },
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "sum(rate(node_network_transmit_drop_total[5m]) * on(instance) group_left(node) (label_replace((node_uname_info), \"node\", \"$1\", \"nodename\", \"(.*)\") * on(node) group_left(role) kube_node_role{role=\"$noderole\"})) by (node)",
                "format": "table",
                "hide": false,
                "instant": true,
                "interval": "",
                "legendFormat": "",
                "refId": "transmit-packets-dropped"
              }
            ],
            "title": "Current Network Usage by Node",
            "transformations": [
              {
                "id": "merge",
                "options": {}
              },
              {
                "id": "organize",
                "options": {
                  "excludeByName": {
                    "Time": true
                  },
                  "indexByName": {},
                  "renameByName": {}
                }
              }
            ],
            "type": "table"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 40
            },
            "id": 83,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "instance:node_network_receive_bytes_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
                "hide": false,
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "A"
              }
            ],
            "title": "Reveive Network Bandwith by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "pps"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 47
            },
            "id": 59,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "instance:node_network_receive_packets_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
                "hide": false,
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "A"
              }
            ],
            "title": "Reveive Network Packets by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "bytes"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 54
            },
            "id": 54,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "instance:node_network_transmit_bytes_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
                "hide": false,
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "A"
              }
            ],
            "title": "Transmit Network Bandwith by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "pps"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 61
            },
            "id": 60,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "instance:node_network_transmit_packets_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "A"
              }
            ],
            "title": "Transmit Network Packets by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "pps"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 68
            },
            "id": 67,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "single"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "instance:node_network_receive_drop_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "A"
              }
            ],
            "title": "Reveive Network Packets Dropped by Node",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 3,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "decimals": 2,
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green"
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "pps"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 24,
              "x": 0,
              "y": 75
            },
            "id": 68,
            "options": {
              "legend": {
                "calcs": [
                  "min",
                  "max",
                  "mean",
                  "last"
                ],
                "displayMode": "table",
                "placement": "right"
              },
              "tooltip": {
                "mode": "multi"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus",
                  "uid": "${DS_PROMETHEUS-K8S-PROD}"
                },
                "exemplar": false,
                "expr": "instance:node_network_transmit_drop_total:sum_rate * on(instance) group_left(node) instance:kube_node_role{role=\"$noderole\"}",
                "interval": "",
                "legendFormat": "{{node}}",
                "refId": "A"
              }
            ],
            "title": "Transmit Network Packets Dropped by Node",
            "type": "timeseries"
          }
        ],
        "title": "Network Monitoring",
        "type": "row"
      }
    ],
    "refresh": "1m",
    "schemaVersion": 34,
    "style": "dark",
    "tags": [],
    "templating": {
      "list": [
        {
          "current": {
            "selected": false,
            "text": "Prometheus-k8s-prod",
            "value": "Prometheus-k8s-prod"
          },
          "hide": 0,
          "includeAll": false,
          "label": "Datasource",
          "multi": false,
          "name": "datasource",
          "options": [],
          "query": "prometheus",
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "type": "datasource"
        },
        {
          "current": {},
          "datasource": {
            "type": "prometheus",
            "uid": "${DS_PROMETHEUS-K8S-PROD}"
          },
          "definition": "label_values(kube_node_role,role)",
          "hide": 0,
          "includeAll": false,
          "label": "Node Role",
          "multi": false,
          "name": "noderole",
          "options": [],
          "query": {
            "query": "label_values(kube_node_role,role)",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "sort": 0,
          "type": "query"
        },
        {
          "current": {
            "selected": true,
            "text": "1",
            "value": "1"
          },
          "hide": 0,
          "includeAll": false,
          "label": "Spare Nodes",
          "multi": false,
          "name": "sparenodesfactor",
          "options": [
            {
              "selected": false,
              "text": "0",
              "value": "0"
            },
            {
              "selected": true,
              "text": "1",
              "value": "1"
            },
            {
              "selected": false,
              "text": "1.5",
              "value": "1.5"
            },
            {
              "selected": false,
              "text": "2",
              "value": "2"
            }
          ],
          "query": "0,1,1.5,2",
          "queryValue": "",
          "skipUrlSync": false,
          "type": "custom"
        }
      ]
    },
    "time": {
      "from": "now-6h",
      "to": "now"
    },
    "timepicker": {},
    "timezone": "",
    "title": "ONZACK - Cluster Monitoring (recording rules)",
    "uid": "ONZACKEO2URUb7recordingCLU",
    "version": 48,
    "weekStart": ""
  }